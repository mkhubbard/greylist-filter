.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.14
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "GRISTOOL 8"
.TH GRISTOOL 8 "2005-03-03" "0.1-DEVEL" "Grist Grelist Policy Server Package"
.SH "NAME"
\&\fBgristool\fR \- grist greylist database managment tool
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
gristool.pl [\fB\s-1OPTIONS\s0\fR] [\fB\s-1COMMAND\s0\fR] \fBarguments\fR...
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBGristool\fR is part of the grist greylist policy server toolset. \fBGristool\fR provides a simplified 
interface to the greylist database and is required for common database maintaince procedures.
.PP
This man page was written very late one night, or early one morning depedning how you want to look
at it. A rewrite and restructure is pending but the beef of the information is acurate, and if I 
goofed the utility will let you know. =)
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-c\fR, \fB\-\-conf\fR" 6
.IX Item "-c, --conf"
Specify the full path and name of the grist configuration file. 
.Sp
Default is: /usr/local/etc/grist.conf
.IP "\fB\-p\fR, \fB\-\-pretend\fR" 6
.IX Item "-p, --pretend"
Will prevent any modifications from beign made to the database. Only applies to operations which would 
alter the database other commands will simply ignore it.
.IP "\fB\-v\fR, \fB\-\-verbose\fR" 6
.IX Item "-v, --verbose"
Will cause \fBgristool\fR to print various messages to the screen throughout the course of execution. This
option is usually only useful for troubleshooting.
.IP "\fB\-V\fR, \fB\-\-version\fR" 6
.IX Item "-V, --version"
Display version information and exit.
.SH "COMMANDS"
.IX Header "COMMANDS"
\&\fBGristool\fR has serveral modes of operation which are accessable through command subsets. Below is a list
of commands that are currently implemented and a detailed look at thier usage.
.Sh "prune \s-1AGE\s0 <dead\-requests>"
.IX Subsection "prune AGE <dead-requests>"
.RS 6
The \fBprune\fR command is used to remove request records from the greylist database. 
.Sp
All requests older than or equal to \fB\s-1AGE\s0\fR will be removed from the database. \fB\s-1AGE\s0\fR may be specified as 
seconds, minutes, hours, or days by appending 's', 'm', 'h' or 'd' as a value hint. 
.Sp
Examples of valid \fB\s-1AGE\s0\fR values:
.Sp
.Vb 4
\&        45d     translates to 45 days or <xxx> seconds
\&        3h      translates to 3 hours or <xxx> seconds
\&        45m     translates to 45 minutes or <xxx> seconds
\&        100s    translates to 100 seconds
.Ve
.RE
.RS 6
.Sp
An \fB\s-1AGE\s0\fR value without a trailing 's', 'm', 'h' or 'd' is considered invalid.
.Sp
If \fBdead-requests\fR is specified only records which have a seen count of zero are removed from the
database. 
.RE
.Sh "check \s-1FIELD\s0 \s-1VALUE\s0"
.IX Subsection "check FIELD VALUE"
.RS 6
The \fBcheck\fR command allows you to query the greylist database on one field for an exact value match
and display the results to the console. 
.Sp
It is planned to extend the functionality of this command to allow for similar matching and querying
on multiple fields. In addition other commands for more complex analysis queries are on the drawing
board. 
.Sp
Valid \fB\s-1FIELD\s0\fR values are:
.Sp
.Vb 4
\&        from|sender     
\&        to|recipient
\&        ip|sourceip
\&        host|hostname
.Ve
.Sp
Examples:
.Sp
.RS 6
To seach for all requests sent from joe@mydomain.com:
.Sp
.RS 6
\&\fBgristool check from joe@mydomain.com\fR
.RE
.RE
.RS 6
.Sp
To search for all requests for maria@herdomain.com:
.Sp
.RS 6
\&\fBgristool check to maria@herdomain.com\fR
.RE
.RE
.RS 6
.RE
.RE
.RS 6
.Sp
The output of this command is very self explainatory i will discuss it later.. maybe.
.SH "GREYLIST DATABASE MAINTAINCE"
.IX Header "GREYLIST DATABASE MAINTAINCE"
When implementing a greylisting solution for a high traffic mail server the greylist database will grow very quickly. 
Even for low traffic mail servers the database will require regular pruning though hourly might be excessive.
It is recommended that you schedule \fBgristool\fR to run at regular intervals using a schedualing daemon such as
\&\fBcron\fR to remove any requests which are considered 'dead'.
.Sp
An example \fBcron\fR entry to run \fBgristool\fR every hour and remove all dead request records older than 5 
hours would be as follows:
.Sp
.RS 6
0 * * * * /usr/local/bin/gristool prune 5h dead-requests
.RE
.RE
.RS 6
.Sp
It is also recommended that you schedule a monthly run to remove all records over a specific age. 
.Sp
An example \fBcron\fR entry to run \fBgristool\fR once a month and remove all request records older than 30 days would 
be as follows:
.Sp
.RS 6
* * 1 * * /usr/local/bin/gristool prune 30d
.RE
.RE
.RS 6
.SH "AUTHORS"
.IX Header "AUTHORS"
\&\s-1TODO\s0
.SH "REPORTING BUGS"
.IX Header "REPORTING BUGS"
\&\s-1TODO\s0
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1TODO\s0
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\s-1TODO\s0
